name: "SERVUS US Offboarding v1"
description: "Standard US employee/contractor termination flow"

steps:
  # --- PRE-FLIGHT ---
  - name: validate_target
    description: "Validate target email exists"
    type: action
    action: builtin.validate_target_email
    verify: auto

  # --- AD DISABLE ---
  - name: ad_disable
    description: "AD: Disable account + update description"
    type: action
    action: ad.disable_user
    verify: auto

  # --- OKTA DEACTIVATE ---
  - name: okta_deactivate
    description: "Okta: Deactivate user (Cascades to Slack/Zoom via SCIM)"
    type: action
    action: okta.deactivate_user
    verify: auto

  # --- GOOGLE SUSPEND ---
  - name: google_suspend
    description: "Google: Suspend User via GAM"
    type: action
    action: google_gam.suspend_user
    verify: auto

  # --- MANUAL VERIFICATION ---
  - name: verify_slack
    description: "Verify Slack access is revoked (should be automatic via Okta)"
    type: manual

  - name: recover_assets
    description: "Recover Laptop/Badge/Peripherals"
    type: manual
